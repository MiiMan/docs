---
title: 2. Демо-приложение Counter
description: description
---
Flutter следует концепции "все – это виджет". На практике это означает то, что все компоненты экрана являются Widget. Сам экран состоит из дерева виджетов и также является виджетом.

Давайте взглянем на код ниже:

```dart
import 'package:flutter/material.dart';  
  
void main() {  
  runApp(const MyApp());  
}  
  
class MyApp extends StatelessWidget {  
  const MyApp({super.key});  
  
  @override  
  Widget build(BuildContext context) {  
    return MaterialApp(  
      title: 'Flutter Demo',  
      theme: ThemeData(  
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),  
        useMaterial3: true,  
      ),  
      home: const MyHomePage(title: 'Flutter Demo Home Page'),  
    );  
  }  
}  
  
class MyHomePage extends StatefulWidget {  
  const MyHomePage({super.key, required this.title});  
  final String title;  
  
  @override  
  State<MyHomePage> createState() => _MyHomePageState();  
}  
  
class _MyHomePageState extends State<MyHomePage> {  
  int _counter = 0;  
  
  void _incrementCounter() {  
    setState(() {  
      _counter++;  
    });  
  }  
  
  @override  
  Widget build(BuildContext context) {  
    return Scaffold(  
      appBar: AppBar(  
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,  
        title: Text(widget.title),  
      ),  
      body: Center(  
        child: Column(  
          mainAxisAlignment: MainAxisAlignment.center,  
          children: <Widget>[  
            const Text(  
              'You have pushed the button this many times:',  
            ),  
            Text(  
              '$_counter',  
              style: Theme.of(context).textTheme.headlineMedium,  
            ),  
          ],  
        ),  
      ),  
      floatingActionButton: FloatingActionButton(  
        onPressed: _incrementCounter,  
        tooltip: 'Increment',  
        child: const Icon(Icons.add),  
      ),  
    );  
  }  
}
```

Это код из официального примера. Давайте поделим его на логические части:
1) Точка входа в программу,
2) Инициализация приложения,
3) Инициализация главного экрана.

Давайте рассмотрим каждый из элементов подробнее.

### Точка входа

```dart
void main() {  
  runApp(const MyApp());  
}  
```

В этой части кода инициализируется точка входа в программу и выполняется метод `runApp`, который инициализирует Flutter-приложение и выполняет подключение виджета `MyApp` к экрану.

**То есть:**
- Точка входа в программу такая же, как и у консольных приложений,
- Приложение инициализируется в `runApp`,
- В `runApp` происходит подключение дерева виджетов.

### Инициализация приложения

```dart
class MyApp extends StatelessWidget {  
  const MyApp({super.key});  
  
  @override  
  Widget build(BuildContext context) {  
    return MaterialApp(  
      title: 'Flutter Demo',  
      theme: ThemeData(  
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),  
        useMaterial3: true,  
      ),  
      home: const MyHomePage(title: 'Flutter Demo Home Page'),  
    );  
  }  
}
```

Как можно заметить, `MyApp` наследуется от `StatelessWidget`.  Забегая вперед, всего существует три базовых типа виджетов: `Stateless`, `Stateful`, `Inherited` – мы поговорим о них чуть позже.

`StatelessWidget` – это виджет не имеющий собственного состояния, он конфигурируется лишь единожды при подключению к дереву виджетов (при вызове метода build). То есть, виджеты этого типа не предоставляют возможность переконфигурации или переотрисовки. Зато он отлично подходит для декомпозиции UI на логические части.

Например, в данном случае в `MyApp` инициализируются базовые настройки приложения:

**`MyApp`**
- **`MaterialApp`**
	- Название приложения
	- Стили и цветовая палитра приложения
	- **`MyHomePage`**
		- Название страницы

**То есть:**
- `MyApp` является `StatelessWidget`,
- `MyApp` выделяет описание параметров приложения в отдельную логическую часть. 

## Инициализация главного экрана

```dart
class MyHomePage extends StatefulWidget {  
  const MyHomePage({super.key, required this.title});  
  final String title;  
  
  @override  
  State<MyHomePage> createState() => _MyHomePageState();  
}  
  
class _MyHomePageState extends State<MyHomePage> {  
  int _counter = 0;  
  
  void _incrementCounter() {  
    setState(() {  
      _counter++;  
    });  
  }  
  
  @override  
  Widget build(BuildContext context) {  
    return Scaffold(  
      appBar: AppBar(  
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,  
        title: Text(widget.title),  
      ),  
      body: Center(  
        child: Column(  
          mainAxisAlignment: MainAxisAlignment.center,  
          children: <Widget>[  
            const Text(  
              'You have pushed the button this many times:',  
            ),  
            Text(  
              '$_counter',  
              style: Theme.of(context).textTheme.headlineMedium,  
            ),  
          ],  
        ),  
      ),  
      floatingActionButton: FloatingActionButton(  
        onPressed: _incrementCounter,  
        tooltip: 'Increment',  
        child: const Icon(Icons.add),  
      ),  
    );  
  }  
}
```

`MyHomePage` описывает главную страницу приложения. В отличие от `MyApp`, `MyHomePage` наследуется от `StatefulWidget`. 

`StatefulWidget` –  это виджет, имеющий собственное состояние. Для унификации логики работы с виджетами его состояние вынесено в отдельный класс. Мы можем управлять этим состоянием, что повлечет за собой переконфигурацию и перерисование экрана.

В данном случае, экран выглядит так:

![](../../_assets/png/Снимок%20экрана%202024-11-07%20в%2018.10.13.png)

Как мы видим, по нажатию на кнопку "+" значение на экране увеличивается на единицу. За это отвечает метод `setState`, который маркирует экран, как необходимый для пересборки. В следующем же фрейме Flutter перерисует экран в соответствие с изменениями. Перерисовывается как экран, так и все дочерние виджеты, конфигурация которых поменялась (Например, текст, в который передали новое значение).

**`MyHomePage`**
- **`_MyHomePageState`**
	- Состояние counter
	- Метод для увеличения counter и обновления состояния
	- **`Scaffold`**
		- **`AppBar`**
			- Цвет верхней панели
			- **`Text`**
				- Текст названия
		- **`Center`**
			- **`Column`**
				- Alignment списка
				- **`Text`**
					- You have pushed the button this many times
				- **`Text`**
					- Актуальное значение counter
					- Стиль текста
					- (Перерисовывается при обновлении состояния!)
		- **`FloatingActionButton`**
			- Обработка нажатия
			- Текст всплывающей подсказки
			- **`Icon`**
				- Задание иконки

**То есть:**
- `MyHomePage` является `StatefullWidget`,
- `MyHomePage` выделяет экран в отдельную логическую часть,
- `MyHomePage` может вызвать собственную перерисовку себя и своих дочерних виджетов.

### Выводы
Мы разобрали базовый пример Flutter приложения, поняли из чего оно состоит и усвоили ключевые концепции.